<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>PÁGINA LOGEO MERCADONA</title>
    <style>
        .tablaLogin {
            background-color: #ffad33;
            border: #cc5100 1px solid;
            border-collapse: collapse;
            margin: 1px;
            width: 50%;
        }

        .required {
            height: 16px;
            width: 90%;
        }

        .botones {
            border: 2px solid #008000;
            font-weight: bold;
        }

        .error {
            border: 2px solid #cc0000;
        }
    </style>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body style="font-family:Calibri">
    <form id="form1">
        <div id="cabecera">
            <table style="width: 100%">
                <tr>
                    <td>
                        <img src="\imagenes\cabeceraLogin.PNG" alt="" />
                    </td>
                </tr>
            </table>
        </div>
        <div id="contenido">
            <table style="width:100%">
                <tr>
                    <td>
                        <a style="color:black; font-weight:bold" href="Vista_Registro.html">Registrarse como cliente </a>
                    </td>
                    <td rowspan="3">
                        <table class="tablaLogin">
                            <tr>
                                <td colspan="2">
                                    <!--Validation Sumary-->
                                </td>
                            </tr>
                            <tr>
                                <td style="">
                                    Email/Usuario de acceso:
                                </td>
                                <td>
                                    <!--
                                    <asp:RequiredFieldValidator ID="RequiredFieldValidatorLogin"  ErrorMessage="Debe introducir su Usuario de acceso" ControlToValidate="textBoxUsuario" ForeColor="Red" ValidateRequestMode="Disabled" Display="None"></asp:RequiredFieldValidator>
                                    <asp:RegularExpressionValidator ID="RegularExpressionVMail"  ControlToValidate="textBoxUsuario" ErrorMessage="El email debe tener un formato correcto" ForeColor="Red" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" ValidateRequestMode="Disabled" Display="None"></asp:RegularExpressionValidator>
                                    -->
                                    <input class="required" id="textBoxUsuario" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Contraseña:
                                </td>
                                <td>
                                    <!--
                                    <asp:RequiredFieldValidator ID="RequiredFieldValidatorPass"  ErrorMessage="Debe introducir una contraseña" ControlToValidate="textBoxPass" ForeColor="Red" ValidateRequestMode="Disabled" Display="None"></asp:RequiredFieldValidator>
                                    -->
                                    <input class="required" id="textBoxPass" type="password" />
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td style="text-align:right">
                                    <input class="botones" id="buttonEntrar" type="button" value="Entrar" />
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td style="text-align:right">
                                    <input class="botones" id="buttonPassOlvidada" type="button" value="¿Ha olvidado el usuario la contraseña?" />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td>

                        <a style="color:black; font-weight:bold" href="Vista_Registro.html">Cliente registrado</a>
                    </td>
                </tr>
                <tr>
                    <td>
                        <a style="color:black; font-weight:bold" href="Vista_Registro.html">Condiciones generales de compra </a>
                    </td>
                </tr>
            </table>
        </div>
    </form>
    <script>

        function CajaTexto() {
            this.validado = false
            this.contenido = ""
        }

        CajaTexto.prototype.validar = function (id) {
            var patron = "";
            var numero = "";

            switch (id) {
                case "textBoxUsuario":
                    patron = /^([\da-z_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/;
                    numero = 50;
                    break;
                case "textBoxPass":
                    patron = "[A-Z a-z]{3,}";
                    numero = 8;
                    break;
            }

            var expRegular = new RegExp(patron);
            expRegular.test(this.contenido) == true && this.contenido.length < numero && this.contenido.length > 0 ? this.validado = true : this.validado = false;
        }

        miCajaTexto = null;

        $.fn.validarCajaTexto = function () {
            var caja = new CajaTexto(this);
            caja.validar(id);
            miCajaTexto = caja;
            return caja;
        }

       

        $("#buttonEntrar").click(function () {
            $(".required").each(function () {
                window.alert("El id del elemento es: " + $(this).attr("id"));

                var validados = new Array();

               /* var cajaObligatoria = new CajaTexto($(this).attr("id"));
                cajaObligatoria.contenido = $(this).val();*/

                miCajaTexto = null;

                $.fn.validarCajaTexto = function () {
                    var cajaObligatoria = new CajaTexto($(this).attr("id"));
                    cajaObligatoria.contenido = $(this).val();
                    cajaObligatoria.validar($(this).attr("id"));
                    miCajaTexto = cajaObligatoria;
                    return cajaObligatoria;
                }
               
                //cajaObligaroria.validar($(this).attr("id"));

                window.alert("La caja actual está validada?=>" + cajaObligatoria.validado);

                validados.push(cajaObligaroria.validado);

                if (cajaObligaroria.validado == false) {
                    $(this).addClass("error");
                }

                var validacion = validados.some(el => el == false);
                if (validacion == true) {
                    window.alert("Hay algun obligatorio que no está validado");
                } else {
                    window.alert("Correcto, PASAS!!");
                }                
            })
        });
    </script>
</body>
</html>
